<!DOCTYPE html>
<html>
<head>
    <title>Download Anime</title>
</head>
<body>
    <div id="animeDetails">
        <!-- एनीमे की डिटेल्स यहाँ लोड होंगी -->
    </div>
    <button onclick="handleDownload()">Download Now</button>

    <script>
        async function loadDetails() {
            const animeId = new URLSearchParams(window.location.search).get('id');
            const response = await fetch(`https://gogoanime.herokuapp.com/anime-details/${animeId}`);
            const data = await response.json();
            
            document.getElementById('animeDetails').innerHTML = `
                <h1>${data.animeTitle}</h1>
                <img src="${data.animeImg}">
                <p>${data.synopsis}</p>
            `;
        }

        async function handleDownload() {
            // शॉर्टनर लिंक को API से प्राप्त करें
            const shortenerResponse = await fetch('https://api.short.io/links', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'YOUR_SHORTENER_API_KEY'
                },
                body: JSON.stringify({
                    originalURL: 'REAL_DOWNLOAD_LINK_FROM_API',
                    domain: 'short.io'
                })
            });
            
            const shortLink = await shortenerResponse.json();
            window.location.href = shortLink.shortURL; // शॉर्टनर पर रीडायरेक्ट
        }

        // पेज लोड होते ही डिटेल्स दिखाएँ
        loadDetails();
    </script>
</body>
</html>
